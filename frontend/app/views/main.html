<div class="row m-b">
  <div class="col-md-4 m-b">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title"><i class="fa fa-filter"></i> Filter</h4>
      </div>
      <div class="panel-body">
        <form class="form-inline meal-filter">
          <div class="form-group">
            <label>Date: </label>
            <div class="input-group input-group-sm">
              <span class="input-group-addon">From</span>
              <input type="datetime" class="form-control" date-time ng-model="main.filter.from_date"
                view="date" min-view="date" auto-close="true" format="yyyy-MM-dd">
            </div>
            <div class="input-group input-group-sm">
              <span class="input-group-addon">To</span>
              <input type="datetime" class="form-control" date-time ng-model="main.filter.to_date"
                view="date" min-view="date" auto-close="true" format="yyyy-MM-dd">
            </div>
          </div>
          <div class="form-group">
            <label>Time: </label>
            <div class="input-group input-group-sm">
              <span class="input-group-addon">From</span>
              <input class="form-control" ui-timepicker="main.timeOptions" ng-model="main.filter.from_time">
            </div>
            <div class="input-group input-group-sm">
              <span class="input-group-addon">To</span>
              <input class="form-control" ui-timepicker="main.timeOptions" ng-model="main.filter.to_time">
            </div>
          </div>
        </form>
      </div>
      <div class="panel-footer">
        <div class="btn-group btn-group-sm" role="group">
          <a class="btn btn-success" ng-click="main.applyFilter()"><i class="fa fa-check"></i> Apply</a>
          <a class="btn btn-default" ng-click="main.clearFilter()"><i class="fa fa-ban"></i> Clear</a>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-8 meal-list">
    <uib-tabset>
      <uib-tab>
        <uib-tab-heading>
          <i class="fa fa-list"></i> Meal List
        </uib-tab-heading>
        <div class="m-t" infinite-scroll="main.loadMore()"
            infinite-scroll-disabled="main.noMore || main.loading">

          <div class="panel" ng-repeat="d in main.dates" ng-class="main.successOrDanger(d)">
            <div class="panel-heading pointer" ng-click="main.toggleDate(d)">
              {{ d|date:'MMM dd, yyyy' }}
              <span class="pull-right"> Total: {{ main.sumDateCal(d) }} (cal)</span>
            </div>
            <div class="panel-body animated fadeIn" ng-if="main.showDate[d]">
              <div class="row meal-item" ng-repeat-start="m in main.meals[d]"
                ng-class-odd="'meal-item-odd'" ng-class-even="'meal-item-even'"
                ng-click="main.editingMeal(m, $index)">
                <div class="col-md-2 m-t-xs m-b-xs text-right">
                  <strong><i>{{ m.meal_time_str }}</i></strong>
                </div>
                <div class="col-md-5 m-t-xs m-b-xs">
                  {{ m.what }}
                </div>
                <div class="col-md-3 m-t-xs m-b-xs">
                  {{ m.calorie }}
                </div>
                <div class="col-md-2 m-t-xs m-b-xs text-info text-right">
                  <span class="meal-item-delete" ng-click="main.deleteMeal(m, $index, $event)"><i class="fa fa-trash-o fa-fw"></i></span>
                </div>
              </div>
              <div class="panel panel-success animated fadeIn" ng-repeat-end ng-if="main.editing[m.id] !== undefined">
                <div class="panel-body">
                  <form class="form-inline meal-item-form">
                    <div class="form-group form-group-sm">
                      <div class="input-group">
                        <div class="input-group-addon"><small>Time</small></div>
                        <input class="form-control" ui-timepicker="main.timeOptions" ng-model="main.editing[m.id].meal_time">
                      </div>
                    </div>
                    <div class="form-group form-group-sm">
                      <div class="input-group">
                        <div class="input-group-addon"><small>Meal</small></div>
                        <input type="text" class="form-control" ng-model="main.editing[m.id].what">
                      </div>
                    </div>
                    <div class="form-group form-group-sm">
                      <div class="input-group">
                        <div class="input-group-addon"><small>Calorie</small></div>
                        <input type="number" class="form-control" ng-model="main.editing[m.id].calorie">
                      </div>
                    </div>
                  </form>
                </div>
                <div class="panel-footer">
                  <div class="btn-group btn-group-sm">
                    <button class="btn btn-success" ng-click="main.saveMeal(main.editing[m.id])">Save</button>
                    <button class="btn btn-default" ng-click="main.closeEditing(m.id)">Cancel</button>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </uib-tab>
      <uib-tab>
        <uib-tab-heading>
          <i class="fa fa-plus"></i> New Meal
        </uib-tab-heading>
      </uib-tab>
    </uib-tabset>
    <!--
    <div>
      <a class="btn btn-default btn-sm btn-block">
        More <i class="fa fa-angle-double-down"></i>
      </a>
    </div>
    -->
  </div>

</div>
